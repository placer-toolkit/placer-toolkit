---
title: Mutation Observer
description: The Mutation Observer component offers a thin, declarative interface to the MutationObserver API.
---

The Mutation Observer component offers a thin, declarative interface to the [`MutationObserver` API](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver).

The mutation observer will report changes to the content it wraps through the `pc-mutation` event. When emitted, a collection of [`MutationRecord`](https://developer.mozilla.org/en-US/docs/Web/API/MutationRecord) objects will be attached to `event.detail` that contains information about how it changed.

```demo:open
<div class="mutation-overview">
    <pc-mutation-observer attribute="appearance">
        <pc-button appearance="primary">Click to mutate</pc-button>
    </pc-mutation-observer>
    <br />
    ⬆️ Click the button and watch the console
</div>

<script>
    const container = document.querySelector(".mutation-overview");
    const mutationObserver = container.querySelector("pc-mutation-observer");
    const button = container.querySelector("pc-button");

    const appearances = ["primary", "success", "neutral", "warning", "danger"];
    let clicks = 0;

    button.addEventListener("click", () => {
        clicks++;
        button.setAttribute(
            "appearance",
            appearances[clicks % appearances.length],
        );
    });

    mutationObserver.addEventListener("pc-mutation", (event) => {
        console.log(event.detail);
    });
</script>

<style>
    .mutation-overview pc-button {
        margin-block-end: var(--pc-spacing-l);
    }
</style>
```

## Demos

### Child list

Use the `child-list` attribute to watch for new child elements that are added or removed.

```demo
<div class="mutation-child-list">
    <pc-mutation-observer child-list>
        <div class="buttons">
            <pc-button appearance="primary">Add button</pc-button>
        </div>
    </pc-mutation-observer>
    ⬆️ Add and remove buttons and watch the console
</div>

<script>
    const container = document.querySelector(".mutation-child-list");
    const mutationObserver = container.querySelector("pc-mutation-observer");
    const buttons = container.querySelector(".buttons");
    const addButton = container.querySelector('pc-button[appearance="primary"]');

    let index = 0;

    addButton.addEventListener("click", () => {
        const button = document.createElement("pc-button");
        button.textContent = index++;
        buttons.append(button);
    });

    buttons.addEventListener("click", (event) => {
        event.stopPropagation();

        const target = event.target.closest('pc-button:not([appearance="primary"])');

        if (target) {
            target.remove();
        }
    })
</script>

<style>
    .mutation-child-list .buttons {
        display: flex;
        gap: var(--pc-spacing-xs);
        flex-wrap: wrap;
        margin-block-end: var(--pc-spacing-l);
    }
</style>
```
