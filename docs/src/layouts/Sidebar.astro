---
import { getLanguageFromURL, useTranslations } from "../i18n/utilities.js";

import DynamicSidebar from "../components/DynamicSidebar.astro";

const language = getLanguageFromURL(Astro.url);
const translation = useTranslations(language);
---

<aside
    class="sidebar pc-cloak"
    role="complementary"
    aria-label={translation("sidebar.aria") as string}
>
    <DynamicSidebar isMobile={false} />
</aside>

<style>
    .sidebar {
        grid-area: sidebar;
        position: sticky;
        inset-block-start: 3.5rem;
        inset-inline-start: 0;
        padding: var(--pc-spacing-xl);
        min-inline-size: 300px;
        max-inline-size: 300px;
        block-size: calc(100dvh - 3.5rem);
        background-color: var(--pc-color-surface-default);
        border-inline-end: var(--pc-panel-border-width)
            var(--pc-panel-border-style) var(--pc-color-surface-border);
        z-index: 2;
        overflow-y: auto;
    }

    .sidebar:focus-visible {
        outline: var(--pc-focus-ring);
        outline-offset: calc(-1 * var(--pc-focus-ring-width));
        animation: inset-focus-ring-animation var(--pc-transition-medium)
            cubic-bezier(0.33, 1, 0.68, 1);
    }

    @keyframes inset-focus-ring-animation {
        0% {
            outline-width: 0;
            outline-offset: 0;
        }

        50% {
            outline-width: calc(var(--pc-focus-ring-width) * 2);
            outline-offset: calc(-1 * (var(--pc-focus-ring-width) * 2));
        }

        100% {
            outline-width: var(--pc-focus-ring-width);
            outline-offset: calc(-1 * var(--pc-focus-ring-width));
        }
    }

    @media screen and (max-width: 992px) {
        .sidebar {
            display: none;
        }
    }
</style>
